{% extends "base.html" %}
{% block main %}
        <!--main-->
        <div id="main">
            <div id="article">
            <article class="post">
                <header>
                    <!--博客题目-->
                    <div class="title">
                        <!--标题-->
                        <h2><a href="#">第一篇，纪念我们的爱情</a></h2>
                        <!--简介-->
                        <p>大狗二狗的狗窝准备开工啦，希望大猪蹄子能够每天开开心心</p>
                    </div>

                    <!--相关信息-->
                    <div class="meta">
                        <time class="published" datetime="2019-3-13">3-13 1:29</time>
                        <a href="#" class="author">
                            <span class="name">大狗</span>
                            <img src="{{ url_for('static',filename='images/icons/twodog.jpeg') }}" alt="" />
                        </a>
                    </div>
                </header>
                <!--图片-->
                <a href="#" class="image featured">
                    <img src="{{ url_for('static',filename='images/photos/2019/3/01.jpeg') }}" alt="" />
                </a>
                <p>
                    这是第一篇文章,狗窝才刚刚搭上第一块砖，作为开篇的第一句当然要来一句，李雪锴！李二狗！李大猪蹄！我爱你！
                    不知不觉已经和二狗牵手走过了两年啦，��，二狗总是担心工作的问题，有点闷闷不乐的，但我觉得宝宝完全没有必要，因为锴锴是我见过的最努力的人了，
                    我比较担心我会待在南京回不去，我不想分开，我想如果之后不行的话，就去苏州在找一个工作吧！
                </p>
                <footer>

                </footer>
            </article>

            <article class="post">
                <header>
                    <!--博客题目-->
                    <div class="title">
                        <!--标题-->
                        <h2><a href="#">网站计划表</a></h2>
                        <!--简介-->
                        <p>需要实现的功能的列表以及完成程度，莫名头大</p>
                    </div>

                    <!--相关信息-->
                    <div class="meta">
                        <time class="published" datetime="2019-3-13">3-18 1:15</time>
                        <a href="#" class="author">
                            <span class="name">大狗</span>
                            <img src="{{ url_for('static',filename='images/icons/twodog.jpeg') }}" alt="" />
                        </a>
                    </div>
                </header>
                <!--图片-->
                <a href="#" class="image featured">
                    <img src="{{ url_for('static',filename='images/photos/2019/3/18.jpg') }}" alt="" />
                </a>
                <p>
                    <ul>
                        <li>登陆功能（80%）</li>
                        <li>用户管理，包括修改密码，修改头像（0%）</li>
                        <li>主页只显示日志的部分内容，可跳转到详情页（0%）</li>
                        <li>数据库和文件系统实现（0%）</li>
                        <li>日志可以通过在线编写，并且支持markdown格式（0%）</li>
                        <li>支持文件、图片上传和下载（0%）</li>
                        <li>实现邮箱留言功能（0%）</li>
                        <li>日志可设置是否公开可见（0%）</li>
                        <li>在娱乐活动中添加相关的工具，视频，游戏等等（0%）</li>
                        <li>狗粮区可以显示图片和视频，先暂时方格显示，之后需要改成随机大小显示（0%）</li>
                        <li>日志可以分类，自己添加分类项（0%）</li>
                        <li>支持动态显示，动态添加信息（0%）</li>
                    </ul>
                </p>
                <footer>

                </footer>
            </article>
            {% if data %}
                <article class="post">
                <header>
                    <!--博客题目-->
                    <div class="title">
                        <!--标题-->
                        <h2><a href="/blog/{{ data['id'] }}">{{ data['title'] }}</a></h2>
                        <!--简介-->
                        <p>{{ data['introduce'] }}</p>
                    </div>

                    <!--相关信息-->
                    <div class="meta">
                        <time class="published" datetime="2019-3-13">{{ data['time'] }}</time>
                        <a href="#" class="author">
                            <span class="name">大狗</span>
                            <img src="{{ url_for('static',filename='images/icons/twodog.jpeg') }}" alt="" />
                        </a>
                    </div>
                </header>
                <!--图片-->
                    {% if data['images'] %}
                <a href="/blog/{{ data['id'] }}" class="image featured">
                    <img src="../static/Data/Blog/{{ data['id'] }}/{{ data['images'][0] }}" alt="" />
                </a>
                    {% endif %}
                <p>
                    {{ data['content'] }}
                </p>
                <footer>

                </footer>
            </article>
            {% endif %}
            <!--页面显示-->
            </div>
            <ul class="actions pagination">
                <li>
                    <button id="submit">显示更多</button>
                    <input type="hidden" name="next_data" value="2">
                </li>
            </ul>
        </div>

        <!--左侧目录-->
        <section id="sidebar">
            <!--介绍-->
            <section id="intro">
                <a href="#" class="logo"><img src="{{ url_for('static', filename='images/icons/twodog.jpeg') }}" alt="" /></a>
                <header>大狗二狗的狗窝</header>
                <p></p>
                <p></p>
                <ul style="list-style-type: none;">
                    {% if user %}
                        <li>
                            <a href="write" class="button big next">写点东西</a>
                        </li>
                    {% endif %}
                    <li>
                        <p style="margin-top: 20px;margin-bottom: 0px;">分类</p>
                        <select class="button big next">
                            <option value ="volvo">Volvo</option>
                            <option value ="saab">Saab</option>
                            <option value="opel">Opel</option>
                            <option value="audi">Audi</option>
                        </select>
                    </li>
                </ul>
            </section>

            <!--最近创作-->
            <section>
                <div class="mini-posts">
                    <article class="mini-post">
                        <a href="write">写点东西</a>
                    </article>
                    <!--小简介-->
                    <article class="mini-post">
                        <header>
                            <h3><a href="#">第一篇，纪念我们的爱情</a></h3>
                            <time class="published" datetime="2019-12-12">3-13 1:29</time>
                            <h5>大狗二狗的狗窝准备开工啦，希望大猪蹄子能够每天开开心心</h5>
                        </header>
                        <a href="#" class="image"><img src="{{ url_for('static',filename='images/photos/2019/3/01.jpeg') }}" alt=""/></a>
                    </article>

                    <article class="mini-post">
                        <header>
                            <h3><a href="#">网站计划表</a></h3>
                            <time class="published" datetime="2019-12-12">3-18 1:15</time>
                            <h5>需要实现的功能的列表以及完成程度，莫名头大</h5>
                        </header>
                        <a href="#" class="image"><img src="{{ url_for('static',filename='images/photos/2019/3/18.jpg') }}" alt=""/></a>
                    </article>

                </div>
            </section>
        </section>

<script type="text/javascript">
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  $(function() {
    $('#submit').bind('click', function() {
      $.getJSON($SCRIPT_ROOT + '/getnext', {
        page: $('input[name="next_data"]').val()
      }, function(data) {
        $('input[name="next_data"]').val(data.result['page']);
        var html = '<article class="post">'+
                '<header>'+
                    '<div class="title">'+
                        '<h2>'+'<a href="#">'+data.result['html']['title']+'</a>'+'</h2>'+
                        '<p>'+data.result['html']['introduce']+'</p>'+
                    '</div>'+
                    '<div class="meta">'+
                        '<time class="published" datetime="2019-3-13">'+data.result['html']['time']+'</time>'+
                        '<a href="#" class="author">'+
                            '<span class="name">'+'大狗'+'</span>'+
                        '</a>'+
                    '</div>'+
                '</header>'+
            '</article>'
        $("#article").append(html);
      });
      return false;
    });
  });
</script>
{% endblock %}
